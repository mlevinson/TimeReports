<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" class="www-content" lang="en">
    <head>
        <title>
            Outsource to Freelancers, IT Companies, Programmers, Web Designers from India, Russia, USA, and more - oDesk
        </title>
        <link rel="stylesheet" href="http://www.odesk.com/css/static/REL201002040104/nav.css" type="text/css" /> 
        <link rel="stylesheet" href="css/timereports.css" type="text/css" />         
        <script type="text/javascript" src="http://www.odesk.com/js/static/REL201002040104/css_browser_selector.js">
</script>                               
        <link rel="stylesheet" href="http://www.odesk.com/css/static/REL201002040104/odesk_console.css" type="text/css" />
        <link rel="stylesheet" href="http://www.odesk.com/js/jquery/plugins/css/static/REL201002040104/thickbox.css" type="text/css" />
        <link rel="stylesheet" href="http://www.odesk.com/api/owl/dhtml_widgets.css" type="text/css" />
        <script type="text/javascript">
//<![CDATA[
        var _sf_startpt=(new Date()).getTime()
        //]]>
        </script>
        <script type="text/javascript">
//<![CDATA[
        var ODESK_CONSOLE_ROOT    = "http://www.odesk.com/",
        ODESK_COOKIE_PREFIX   = "",
        ODESK_COOKIE_DOMAIN   = ".odesk.com",
        MC_SHOW_NEW_TTL       = "60000",
        MC_REST_URI           = "/api/mc/v1",
        MC_WIDGET_ITEMS       = "3",
        MC_WIDGET_ITEM_LENGTH = "30",
        USER_UID              = "";
        MAINTENANCE_ALERT_TTL = 86400;
        //]]>
        </script>
        <script type="text/javascript" src="http://www.odesk.com/js/jquery/jquery.pack.js">
</script>
        <script type='text/javascript' src='http://www.odesk.com/js/jquery/plugins/static/REL201002040104/jquery.plugins.js'>
</script>  
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.min.js" type="text/javascript" charset="utf-8"></script>
        <link rel='stylesheet' href='http://www.odesk.com/js/jquery/plugins/css/static/REL201002040104/jquery.plugins.css' type='text/css' />
        <script type="text/javascript" src="http://www.odesk.com/js/static/REL201002040104/nav.js">
</script>
        <script type="text/javascript" src="http://www.odesk.com/js/static/REL201002040104/table.js">
</script>
        <script type="text/javascript" src="http://www.odesk.com/js/static/REL201002040104/odesk_console.js">
</script>            
        <script src="js/date.js" type="text/javascript" charset="utf-8"></script> 
        <script src="js/jquery.ui.ringceMonthSelector.js" type="text/javascript" charset="utf-8"></script>         
        <script src="js/jquery.dataTables.min.js" type="text/javascript" charset="utf-8"></script> 
        <script src="js/jquery.formatCurrency.js" type="text/javascript" charset="utf-8"></script>         
        <script src="js/oDeskUtils.js" type="text/javascript" charset="utf-8"></script>                 
        <script src="js/jquery.ui.odeskJSONSelect.js" type="text/javascript" charset="utf-8"></script>                         
        <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    </head>
    <body bgcolor="#FFFFFF">
        <div id="wrapper">
            <noscript style="font-family:Verdana;font-size:10px;font-weight:bold;color:red;width:100%;">Javascript must be enabled to properly navigate this site.</noscript> <script type="text/javascript">
//<![CDATA[
            function ChangeSearchCondition() {
            var selectedValue = $('#where').val();
            var searchString  = encodeURIComponent($("#searchText").val());
            var action        = "http://www.odesk.com/community/search/node/";

            if(selectedValue == "Providers")
            action = "http://www.odesk.com/users/?nbs=1&to=yes&g=&q=";
            else if (selectedValue == "Jobs")
            action = "http://www.odesk.com/jobs/?nbs=1&g=&q=";
            else if(selectedValue == "Tests")
            action = "http://www.odesk.com/g/?nbs=1&search_button.x=1&action=Qualification_tests&reset=1&filter%5BName%5D=";
            else if (selectedValue == "Help")
            action = "http://www.odesk.com/help//search_topics/";

            $('#searchform').attr('action', action+searchString+'&qs=1');
            }
            //]]>   
            
         
            </script>
            <div id="nav_v3">
                <ul id="lev1" class="menu">
                    <li class="nav-first nav-group-begin nav-group-end menuitem" id="globalnav-overview-link" style="z-index:1001;">
                        <a href="http://www.odesk.com/apps.php"><img src="http://www.odesk.com/images/icons/odesk_tab_off.gif" alt="Marketplace for Online Workteams" border="0" /></a>
                        <ul class="menu">
                            <li class="menuitem">
                                <a href="http://www.odesk.com/w/" class="nav-tooltip" title="Welcome to oDesk!">Home</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/w/whyodesk" class="nav-tooltip" title="Guaranteed work. Guaranteed payment.">Why oDesk</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/w/odesk_story" class="nav-tooltip" title="Learn how oDesk helped George, Christine, and Sergey.">Tour</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/w/testimonials" class="nav-tooltip" title="Read about people like you who buy or sell services using oDesk!">Who Uses oDesk</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/w/faqs" class="nav-tooltip" title="Newcomer questions answered">FAQs</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/w/press" class="nav-tooltip" title="Featured news stories and official press releases">Press</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-last nav-group-begin nav-group-end menuitem">
                        <a href="http://www.odesk.com/users?g=&amp;clear_button=1">Find Providers &amp; Jobs</a>
                        <ul class="menu">
                            <li class="menuitem">
                                <a href="http://www.odesk.com/users?g=&amp;clear_button=1" class="nav-tooltip" title="Search for people and companies to interview and hire">Find Providers</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/jobs?clear_button=1&amp;g=" class="nav-tooltip" title="Find and apply to jobs">Find Jobs</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/tests" class="nav-tooltip" title="Find qualified providers or take tests to prove your skills">Tests</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/trends" class="nav-tooltip" title="Job stats and top providers by skill">Trends</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/community/oconomy" class="nav-tooltip" title="Stats on the oDesk economy">oConomy</a>
                            </li>
                            <li style="padding-right: 0px;" class="menuitem">
                                <a href="http://www.odesk.com/groups" class="nav-tooltip" title="Groups on oDesk">Groups <span class="icon new">&nbsp;</span></a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-first nav-group-begin menuitem" style="z-index:1001;">
                        <a href="http://www.odesk.com/assignments/">My Jobs</a>
                        <ul class="menu">
                            <li class="menuitem">
                                <a href="http://www.odesk.com/c/?action=Openings" class="nav-tooltip" title="Review jobs posted by you or your company">Openings</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/d/?action=Candidacies" class="nav-tooltip" title="Review jobs applied to by you or your company">Candidacies</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/assignments/" class="nav-tooltip" title="Review your jobs that are active or completed">Assignments</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/c/?action=Openings&amp;do=new_opening" class="nav-tooltip" title="Create an opening so you can interview and hire a provider">Post a Job</a>
                            </li>
                        </ul>
                    </li>
                    <li class="menuitem">
                        <a href="http://www.odesk.com/teamroom">Manage &amp; Work</a>
                        <ul class="menu">
                            <li class="menuitem">
                                <a href="http://www.odesk.com/teamroom" class="nav-tooltip" title="Collaborate with your teammates: buyer, providers, staff, and colleagues.">Team Room</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/workdiary" class="nav-tooltip" title="View your or your teammates' work in progress">Work Diary</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/reports.php" class="nav-tooltip" title="Timelogs and analysis">Reports</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/team_admin.php" class="nav-tooltip" title="Manage your team members and permissions">Team Admin</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/a/am_console.php" class="nav-tooltip" title="Manage your Affiliated Contractors">Staffing Console</a>
                            </li>
                        </ul>
                    </li>
                    <li class="nav-last nav-group-end menuitem">
                        <a href="https://www.odesk.com/acc_history.php">Payments</a>
                        <ul class="menu">
                            <li class="menuitem">
                                <a href="https://www.odesk.com/acc_history.php" class="nav-tooltip" title="View debits and credits to your account and download your transaction history">Financial Activity</a>
                            </li>
                            <li class="menuitem">
                                <a href="https://www.odesk.com/payments.php" class="nav-tooltip" title="Manage options for paying providers and withdrawing earnings">Payment Methods</a>
                            </li>
                            <li class="menuitem">
                                <a href="https://www.odesk.com/withdraw.php" class="nav-tooltip" title="Withdraw your earnings">Withdrawals</a>
                            </li>
                            <li class="menuitem">
                                <a href="http://www.odesk.com/myreferrals.php" class="nav-tooltip" title="Earn up to $50 for every person you refer to oDesk!">Referrals</a>
                            </li>
                        </ul>
                    </li>
                </ul>
                <form id="searchform" name="SearchForm" action="http://www.odesk.com/g/" method="get">
                    <ul id="comm_help">
                        <li id="community-menu" class="menuitem">
                            <a href="http://www.odesk.com/community/">Community</a>
                            <ul class="menu">
                                <li class="menuitem">
                                    <a href="http://www.odesk.com/whatsnew" class="nav-tooltip" title="Check out our latest features and a timeline of past releases">What's New</a>
                                </li>
                                <li class="menuitem">
                                    <a href="http://www.odesk.com/community/" class="nav-tooltip" title="Talk with fellow users">Forums</a>
                                </li>
                                <li class="menuitem">
                                    <a href="http://www.odesk.com/blog/" class="nav-tooltip" title="News, commentary, and expert advice">Blog</a>
                                </li>
                                <li class="menuitem">
                                    <a href="http://www.odesklabs.com/store/" class="nav-tooltip" title="Buy oDesk merchandise&amp;hellip; be the most fashionable geek on the block!">Store</a>
                                </li>
                            </ul>
                        </li>
                        <li id="help-menu" class="menuitem">
                            <a href="http://www.odesk.com/help/" rel="nofollow"><span style="background-color:rgb(52,91,158);" class="badge">?</span>Help</a>
                            <ul class="menu">
                                <li class="menuitem">
                                    <a href="http://www.odesk.com/help/" class="nav-tooltip" title="Find answers to your questions">Help Center</a>
                                </li>
                                <li class="menuitem">
                                    <a href="http://www.odesk.com/help/index_topics" class="nav-tooltip" title="All our help articles&amp;hellip; from A to Z">A-Z Index</a>
                                </li>
                                <li class="menuitem">
                                    <a href="http://www.odesk.com/community/resources" class="nav-tooltip" title="Download the oDesk Team client, read the Marketplace User Agreement, fill out a W-9 form, and more">Resources &amp; Downloads</a>
                                </li>
                                <li class="menuitem">
                                    <a href="http://www.odesk.com/help/ticket" class="nav-tooltip" title="Submit a help ticket to the oDesk support team">Contact Support</a>
                                </li>
                            </ul>
                        </li>
                        <li id="search">
                            <input type="text" value="Search..." name="searchText" id="searchText" alt="Search..." size="8" /> <select id="where" name="SearchFormAction">
                                <option value="Providers">
                                    Providers
                                </option>
                                <option value="Jobs">
                                    Jobs
                                </option>
                                <option value="Tests">
                                    Tests
                                </option>
                                <option value="Community">
                                    Community
                                </option>
                                <option value="Help">
                                    Help
                                </option>
                            </select> <input type="submit" name="Submit" id="go_btn" value="go" />
                        </li>
                    </ul>
                </form>
                <div id="lev2" style="height:1.2em;"></div>
            </div>                     
            <div id="reports_header">
                <div id="company_bar">
                    <span class="label">Company:</span>&nbsp;
                    <a id="company_switcher" href="#">
                        <span class="company_name">Michael (teammichael)</span>  
                        <span class="icon arrow_down"></span>        
                    </a>    
                    <div id="company_selector" style="display:none">
                        <input type="text" id="company_reference"/>
                        <button id="switch_company">Go</button>
                    </div>    
                </div>    
                <h1>Monthly Timesheet</h1>
            </div>
            <div id="reports_main_content" class="content_main">
                <div class="control_bar">
                    <div class="control" id="timereports_team_selector">
                        Team:&nbsp;<select class="dispatchable ie-onchange-fix">
                        </select>
                    </div>
                    <div class="control" id="timereports_provider_selector">
                        Provider:&nbsp;<select class="dispatchable ie-onchange-fix">
                        </select>
                    </div>                                                  
                    <div class="control" id="timereports_month_selector">
                        <div id="month_year_display"></div>
                    </div> 
                    <div class="control" id="run_report">
                        <button id="go_run_report">Go</button>
                    </div>
                    <br class="clear">    
                </div>    
                <div class="control_bar white">
                    <div class="upper-right">
                            <div class="control radio-switch dispatchable" id="display_type">
                                <span class="label">Display:</span>
                                <span class="toggle radio selected" id="hours">Hours</span>
                                <span class="space">|</span>
                                <span class="toggle radio" id="charges">
                                    Estimated Charges&nbsp;
                                    <span class="helpTip" title="" 
                                    bt-xtitle="The charges shown in this report&lt;br &gt;&lt;/span&gt;
                                    are estimated because they do not include&lt;br /&gt;discretionary
                                    payments such as bonuses.&lt;br /&gt;Actual charges can be
                                    viewed&lt;br /&gt;in Payments &gt; Financial
                                    Activity.">&nbsp;</span>
                                </span>
                            </div>    
                        </div>
                </div>    
            <h2 class="table-caption"><span id="hours_title" class="hours_label">Hours</span> for <span class="provider-name">Provider</span> in <span class="team-name">Team</span> for the month of <span id="time-month"></span>&nbsp;<span id="time-year"></span></h2>                
                <table id="time-reports-grid" class="tabular">
                    <tfoot>
                        <tr>
                        <td colspan="8">Total <span id="hours_small" class="hours_label">Hours</span> for <span class="provider-name">Provider</span></td>
                        <td class="numeric grand-total"><span id="grand-total"></span></td>
                        </tr>
                    </tfoot>   
                </table>                                            
           </div> 
        </div>
        <script type="text/javascript">           
        var selectedMonthName, selectedYear, selectedMonthNumber, selectedDate;
        var selectedCompanyRef, selectedCompanyName, selectedCompanyId;
        var selectedTeamRef, selectedTeamName, selectedTeamId;        
        var selectedProviderRef, selectedProviderName, selectedProviderId;
        var grandTotal = 0; 
        var initComplete = false;                          
        var dataTable; 
        
        function mustGetHours(){
            return $("#display_type #hours").hasClass("selected");
        } 
        
        function getTeams(company_reference){                       
              $("#timereports_team_selector SELECT").oDeskJSONSelector("populate", {
                    "company": company_reference 
                 });
        }
        
        function getProviders(team_reference){ 
             $("#timereports_provider_selector SELECT").oDeskJSONSelector("populate", {
                "team": team_reference?team_reference:selectedCompanyRef 
             });
        }
              
        function getHours(month, year, company, team, provider){
              if(!company) return;
              grandTotal = 0;  
              var start = year + "-" + month + "-" + "01";
              var dt = Date.parseExact(start, "yyyy-M-dd");
              var end = dt.moveToLastDayOfMonth().toString("yyyy-M-dd");
              var tq = "SELECT worked_on,provider_id, provider_name, sum(hours), sum(charges) WHERE worked_on >= '";
                 tq += start;
                 tq += "' AND worked_on <= '";
                 tq += end;                
                 tq += "'";
                 if(provider){
                     tq += " AND provider_id='";
                     tq += provider;        
                     tq += "'";          
                 }           
                 tq += " ORDER BY provider_id, worked_on";
                 
                 var url = "http://www.odesk.com/gds/timereports/v1/companies/";
                 url += company;  
                 if(team){
                     url += "/teams/";
                     url += team;          
                 }
                 url += "?tq=";
                 url += escape(tq); 
                 url += "&callback=?"
             
              $.getJSON(url, function(data){ 
                   refreshGrid(transformGDS(data, month, year)); 
              });
        }        

        function refreshGrid(data){
            dataTable.fnClearTable(0);
            dataTable.fnAddData(data);
        }   
        
        function transformGDS(data, month, year){  
           grandTotal = 0; 
           var firstDayOfMonth = Date.parseExact("1/" + month + "/" + year, "d/M/yyyy");
           var daysInMonth = Date.getDaysInMonth(parseInt(year), parseInt(month) - 1); 
           var firstDayDayNumber = getDayNumber(firstDayOfMonth);
           var monthName = firstDayOfMonth.toString("MMM");    
           var weekStartDateNumber = 1;
           var rows = [];                    
           var weeks = [];
           var daysInFirstWeek = 6 - firstDayDayNumber;
           var weekDays = daysInFirstWeek;
           var done = false;
           while(!done){               
              var start = monthName + " " + ("00" + weekStartDateNumber).slice(-2);           
              var weekEndDay =  weekStartDateNumber + weekDays;
              weekDays = 6;
              if (weekEndDay >= daysInMonth){
                  weekEndDay = daysInMonth;   
                  done = true;
              }
              var end = monthName + " "   + ("00" + weekEndDay).slice(-2);
              weeks.push(year + '' + month + '' + ("00" + weekStartDateNumber).slice(-2));  
              var weekLabel = start;
              if(end != start){
                  weekLabel += " - "  + end;
              } 
              rows.push([weekLabel, 0, 0, 0, 0, 0, 0, 0, 0]);
              weekStartDateNumber = weekEndDay + 1;
           }      
           if(data.table){
                 $.each(data.table.rows, function(i, record){
                     if(record=="") return false;
                     var recordDate = Date.parseExact(record.c[0].v, "yyyyMMdd");   
                     var whichWeek = 0;
                     $.each(weeks, function(weekIndex, weekFirstDay){
                         var weekDate = Date.parseExact(weekFirstDay, "yyyyMMdd"); 
                         if (recordDate < weekDate){
                             whichWeek = weekIndex - 1; 
                             return false;
                         }
                     });                  
                     var recordWeekDay = getDayNumber(recordDate);
                     var currentVal = parseFloat(rows[whichWeek][recordWeekDay + 1]);    
                     var value = mustGetHours()?  record.c[3].v : record.c[4].v;
                     rows[whichWeek][recordWeekDay + 1] = currentVal + parseFloat(value);
                  });
           }
           
           $.each(rows, function(i, row){
               row[8] = 0;
               var col = 1;
               for(col=1; col<8; col+=1){  
                  if(row[col] != ''){
                      row[8] += parseFloat(row[col]);                      
                  }   
               }              
               grandTotal += row[8];
           });        
           if(mustGetHours()){
               $("#grand-total").text(floatToTime(grandTotal));                      
           } else {
               $("#grand-total").text(currencyFromNumber(grandTotal));                                     
           }

           return rows;
        } 

        function getColumns(){ 
            var render = function(data){
                val = data.aData[data.iDataColumn];
                if(val == 0){
                    return "";
                }  
                if(mustGetHours()){
                    val = floatToTime(val);
                } else {                         
                    val = currencyFromNumber(val);
                }       
                return val;
            }
            return [
                 {
                     "sTitle":"Week",
                     "sClass":"week-col",
                     "sWidth": "96px"                     
                 }, 
                 {
                     "sTitle":"Mon",
                     "fnRender":render,
                     "sWidth": "32px",   
                      "sClass":"numeric"
                 },
                 {
                     "sTitle":"Tue",
                      "fnRender":render,
                     "sWidth": "32px" ,   
                       "sClass":"numeric"                      
                 },
                 {
                     "sTitle":"Wed",
                      "fnRender":render,
                     "sWidth": "32px" ,   
                       "sClass":"numeric"                      
                 },
                 {
                     "sTitle":"Thu",
                      "fnRender":render,
                     "sWidth": "32px" ,   
                       "sClass":"numeric"                      
                 },
                 {
                     "sTitle":"Fri",
                      "fnRender":render,
                     "sWidth": "32px" ,   
                       "sClass":"numeric"                      
                 },
                 {
                     "sTitle":"Sat",
                      "fnRender":render,
                     "sWidth": "32px" ,   
                       "sClass":"numeric"                      
                 }, 
                 {
                      "sTitle":"Sun",
                       "fnRender":render,
                     "sWidth": "32px",   
                     "sClass":"numeric"                     
                 },
                 {
                     "sTitle":"Total",
                      "fnRender":render,
                      "sClass":"numeric total",
                      "sWidth": "48px" 
                 }
            ];
        }   
        
        function refreshReport(){
            $(".provider-name").text(selectedProviderName);                        
            $("#time-month").text(selectedMonthName);
            $("#time-year").text(selectedYear);
            $(".team-name").text(selectedTeamName);
            getHours(selectedMonthNumber, selectedYear, selectedCompanyId, selectedTeamId, selectedProviderId);                                                               
        }                          
        
        
        function setSelectedDate(d){
            selectedDate = d;
            selectedMonthNumber = d.toString("MM");
            selectedMonthName = d.toString("MMMM");            
            selectedYear = d.toString("yyyy"); 
        }     
           
         function setCompanyDefaults(){   
                selectedCompanyRef = getParameterByName("company_ref", "49041");    
                var url = "http://www.odesk.com/api/hr/v2/companies/" + selectedCompanyRef + ".json?callback=?";
                $.getJSON(url, 
                    function(data){     
                     selectedCompanyName = data.company.name;
                     $(".company_name").text(selectedCompanyName);
                     
                }); 
           }
        
           $(function(){
                  dataTable = 
                  $("#time-reports-grid").dataTable({
                       "aoColumns" : getColumns(),
                         "bPaginate": false,
                         "bLengthChange": false,
                         "bFilter": false,
                         "bSort": false,
                         "bInfo": false,
                         "bAutoWidth":false                   
                  });
                $("#display_type .radio").unbind("click").bind("click", function(){
                    if($(this).hasClass("selected")) return false;
                    $("#display_type .radio").toggleClass("selected");
                    $(".hours_label").text(mustGetHours()?"Hours":"Charges");
                    refreshReport();
                });
                $("#timereports_team_selector SELECT").oDeskJSONSelector({
                   json_url_template: "http://www.odesk.com/api/hr/v2/companies/{company}/teams.json?callback=?",
                   all_option_id: "all_teams",
                   all_option_text: "All Teams",
                   dataVariable: "teams",
                   onSelectionChange: function(ref, id, name){
                     selectedTeamId = id;
                     selectedTeamRef = ref;
                     selectedTeamName = name;
                     getProviders(selectedTeamRef);                         
                   },
                   populationComplete: function(){
                    $("#timereports_team_selector SELECT").oDeskJSONSelector("setDefaults");   
                   },
                   processRow: function(team){    
                     if(team.reference == selectedCompanyRef){
                         selectedCompanyId = team.id;
                     }  
                     return true;
                   }
               }); 
               $("#timereports_provider_selector SELECT").oDeskJSONSelector({
                   json_url_template: "http://www.odesk.com/api/hr/v2/teams/{team}/users.json?callback=?",
                   all_option_id: "all_providers",
                   all_option_text: "All Providers",
                   dataVariable: "users",
                   onSelectionChange: function(ref, id, name){
                     selectedProviderId = id;
                     selectedProviderRef = ref;
                     selectedProviderName = name; 
                   },
                   populationComplete: function(){                                                
                        if(!selectedProviderId 
                            || !$("#timereports_provider_selector SELECT #" + selectedProviderId).length){
                              $("#timereports_provider_selector SELECT").oDeskJSONSelector("setDefaults");
                          } else {
                              $("#timereports_provider_selector SELECT #" + selectedProviderId).each(
                                  function(){
                                      this.selected = true;
                              });    
                          }
                   },
                   processRow: function(user){
                     return user.status == "active" && user.is_provider == "1";
                   },                     
                   rowName: function(user){
                       return  user.first_name + " " + user.last_name + " (" + user.id + ")";
                   }
               });
               $("#company_switcher").unbind("click").bind("click", function(){
                  $("#company_selector").slideToggle(); 
               });
               $("#go_run_report").unbind("click").bind("click", function(){
                  refreshReport(); 
               });
               $("#switch_company").unbind("click").bind("click", function(){
                   var new_url = window.location.protocol + "//" + window.location.host + window.location.pathname;
                   new_url += "?company_ref=";
                   new_url += $("#company_reference").val();
                   window.location.assign(new_url);
               });
               
               $("#month_year_display").ringceMonthSelector({
                   onSelectionChange: setSelectedDate
               });
               setSelectedDate(Date.today());
               setCompanyDefaults();              
               getTeams(selectedCompanyRef);
               $("body").ajaxComplete(function(){
                   if(!initComplete && selectedMonthNumber && selectedYear && selectedCompanyId){
                       refreshReport();                   
                       initComplete = true;     
                   }
               });
              
            });            
        </script>
    </body>
</html>